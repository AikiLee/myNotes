# 定点数的表示和运算

[toc]

## 数制和编码

### 数制

1. 进位计数法

    常用进制，二进制(B),十进制(D),八进制(O),十六进制(H)。

2. 进制的转换

    - 二进制转八、十六：直接可以将三四位合并，

    - 任意进制转十进制

### 原码、反码、补码、移码



## 定点数的计算

### 定点数的移位

#### 1.算数移位

这时最常考的内容，在程序中我们常用 &lt;&lt;表示左移，左移一位就是乘二，这里我们来讲其原理。

由于硬件的限制，一般我们一次性处理8位二进制数，这就提供了一个天然的Mod方法，即硬件帮我们对一组数进行了mod(128)。

对于**原码**我们将这样的一组八个数整体左移或右移，在移动的过程中的就已经对每一位的权值$2^n$进行了整体的乘2或除2，这也就造成了对应十进制数的乘除

注：

1. 右移：若舍弃的位$\not=$0会丢失精度

2. 左移：若丢失的位$\not=$0会引起严重误差

对于**反码**
对于正数的反码，和上述一致，若是负数由于需要变化，需要进行一些操作：

- 右移，高位补一，低位舍弃

- 左移，低位补一，高位舍弃

![202204040054202022-04-04](https://s2.loli.net/2022/04/04/QFYHNCZv96m8TAj.png)
左移右移都要添一

对于**补码**

正数的补码同原码，主要讨论负数
![202204040059082022-04-04](https://s2.loli.net/2022/04/04/DRbnly836zmcGTN.png)
我们从图中可以看到以反码的第一个0为分割（从后往前数）以后的是与原码相同，之前的与反码相同

- 右移（同反码）：高位补一，低位舍弃

- 左移（同原码）：低位补0，高位舍弃

#### 2.逻辑移位

即无符号数的移位，与原码类似。

#### 3.循环移位

![202204040107592022-04-04](https://s2.loli.net/2022/04/04/5ZRlxs9eQyYF8qk.png)不多讲，只需知道，有一个CF存储进位，之后整个链表可以循环移动

### 定点数的加减运算

#### 原码的加减

原码的加减较为复杂：

- 正 + 正 -> 绝对值相加再加上正号
- 负 + 负 -> 绝对值相加再加上负号
- 正 + 负 -> 需要比较绝对值大小才能决定符号

#### 补码的加减

由于原码加减的复杂性，故采用补码来规避对负数的讨论。减法，可以直接转换为$[-x]_补$进而转为加法。

#### 溢出

当两个同号的数相加的时候可能会产生溢出，鉴别方法主要有三种：

![202204050107432022-04-05](https://s2.loli.net/2022/04/05/2deZTqHBfYmoWuQ.png)

1. 采用一个符号位：

    ![202204050109412022-04-05](https://s2.loli.net/2022/04/05/wiAQdjPEzbgfDO9.png)

2. 双符号位：

    ![202204050110412022-04-05](https://s2.loli.net/2022/04/05/KHIn5VRSOLrNBF1.png)

    - 00无溢出，01正溢出，10负溢出，11无溢出

3. 进位位

    ![202204050113562022-04-05](https://s2.loli.net/2022/04/05/q7XwurbSCUBxlcz.png)
